<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ–‡æœ¬æœç´¢å·¥å…·</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 1em;
            line-height: 1.5;
            background-color: #121212;
            color: #e0e0e0;
        }
        #search-box {
            width: calc(100% - 180px);
            padding: 0.7em;
            margin-bottom: 1em;
            font-size: 1.1em;
            border: 1px solid #333;
            border-radius: 5px;
            background-color: #2c2c2c;
            color: #e0e0e0;
        }
        button {
            padding: 0.7em 1.2em;
            font-size: 1.1em;
            border: none;
            background-color: #007bff;
            color: white;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
        #original-text {
            margin-top: 2em;
            padding: 1.5em;
            background-color: #1e1e1e;
            border: 1px solid #333;
            border-radius: 5px;
            white-space: pre-wrap;
            position: relative;
            font-size: 0.6em;
        }
        .highlight {
            background-color: #ffeb3b;
            font-weight: bold;
        }
        .highlight-nav {
            position: fixed;
            top: 50%;
            right: 10px;
            transform: translateY(-50%);
            background-color: #2c2c2c;
            border: 1px solid #333;
            padding: 10px;
            border-radius: 5px;
        }
        .highlight-nav button {
            display: block;
            margin-bottom: 5px;
            background-color: #444;
            color: #e0e0e0;
        }
        .highlight-nav button:hover {
            background-color: #666;
        }
        #alphabet-buttons {
            margin-top: 1em;
        }
        #alphabet-buttons button {
            padding: 0.5em;
            margin: 0.3em;
            font-size: 1.1em;
            border: none;
            background-color: #444;
            color: #e0e0e0;
            border-radius: 3px;
            cursor: pointer;
        }
        #alphabet-buttons button:hover {
            background-color: #666;
        }
    </style>
</head>
<body>
    <h1>æ–‡æœ¬æœç´¢å·¥å…·</h1>
    <div style="display: flex; align-items: center;">
        <input type="text" id="search-box" placeholder="è¾“å…¥å…³é”®è¯...">
        <button onclick="searchText()">æœç´¢</button>
        <button onclick="clearSearchBox()" style="margin-left: 10px;">æ¸…é™¤</button>
    </div>

    <div id="alphabet-buttons">
        <button onclick="appendToSearchBox('A')">A</button>
        <button onclick="appendToSearchBox('B')">B</button>
        <button onclick="appendToSearchBox('C')">C</button>
        <button onclick="appendToSearchBox('D')">D</button>
        <button onclick="appendToSearchBox('E')">E</button>
        <button onclick="appendToSearchBox('F')">F</button>
        <button onclick="appendToSearchBox('G')">G</button>
        <button onclick="appendToSearchBox('H')">H</button>
        <button onclick="appendToSearchBox('I')">I</button>
        <button onclick="appendToSearchBox('J')">J</button>
        <button onclick="appendToSearchBox('K')">K</button>
        <button onclick="appendToSearchBox('L')">L</button>
        <button onclick="appendToSearchBox('M')">M</button>
        <button onclick="appendToSearchBox('N')">N</button>
        <button onclick="appendToSearchBox('O')">O</button>
        <button onclick="appendToSearchBox('P')">P</button>
        <button onclick="appendToSearchBox('Q')">Q</button>
        <button onclick="appendToSearchBox('R')">R</button>
        <button onclick="appendToSearchBox('S')">S</button>
        <button onclick="appendToSearchBox('T')">T</button>
        <button onclick="appendToSearchBox('U')">U</button>
        <button onclick="appendToSearchBox('V')">V</button>
        <button onclick="appendToSearchBox('W')">W</button>
        <button onclick="appendToSearchBox('X')">X</button>
        <button onclick="appendToSearchBox('Y')">Y</button>
        <button onclick="appendToSearchBox('Z')">Z</button>
    </div>

    <div id="original-text">è¿™é‡Œæ˜¯æ‚¨æä¾›çš„æ–‡æœ¬å†…å®¹ï¼Œè¯·æ ¹æ®éœ€è¦è¿›è¡Œä¿®æ”¹ã€‚
ä¾‹å¦‚ï¼šè¿™æ˜¯ç”¨æˆ·ç»™å‡ºçš„æ–‡æœ¬æ®µè½ï¼Œå¯ä»¥ç”¨äºæµ‹è¯•æœç´¢åŠŸèƒ½ã€‚</div>

    <div id="highlight-nav" class="highlight-nav" style="display: none;">
        <button onclick="navigateHighlight('prev')">â¬†ï¸</button>
        <button onclick="navigateHighlight('next')">â¬‡ï¸</button>
        <button onclick="scrollToTop()">ğŸ†™</button>
    </div>

    <script>
        let currentHighlightIndex = -1;
        let matchPositions = [];

        document.getElementById('search-box').addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                searchText();
            }
        });

        function searchText() {
            // è·å–æœç´¢æ¡†çš„å€¼
            const query = document.getElementById('search-box').value.trim();
            const originalTextContainer = document.getElementById('original-text');
            let originalText = originalTextContainer.textContent;

            // å¦‚æœå…³é”®è¯ä¸ºç©ºåˆ™ä¸åšä»»ä½•æ“ä½œ
            if (!query) {
                originalTextContainer.innerHTML = originalText;
                document.getElementById('highlight-nav').style.display = 'none';
                matchPositions = [];
                currentHighlightIndex = -1;
                return;
            }

            // åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…å…³é”®è¯ï¼ˆæ”¯æŒæ‹¼éŸ³é¦–å­—æ¯æ¨¡ç³Šæœç´¢ï¼Œä¸åŒºåˆ†å¤§å°å†™ï¼‰
            const regex = new RegExp(query.split('').map(char => `(${char})`).join('.*'), 'gi');
            let match;
            matchPositions = [];

            // æ‰¾åˆ°æ‰€æœ‰åŒ¹é…çš„ä½ç½®
            while ((match = regex.exec(originalText)) !== null) {
                matchPositions.push(match.index);
            }

            // æ›¿æ¢åŒ¹é…åˆ°çš„å…³é”®è¯å¹¶é«˜äº®æ˜¾ç¤º
            const highlightedText = originalText.replace(regex, '<span class="highlight">$&</span>');
            originalTextContainer.innerHTML = highlightedText;

            // æ›´æ–°å¯¼èˆªæŒ‰é’®
            const highlightNav = document.getElementById('highlight-nav');

            if (matchPositions.length > 0) {
                highlightNav.style.display = 'block';
                currentHighlightIndex = 0;
                scrollToHighlight(currentHighlightIndex);
            } else {
                highlightNav.style.display = 'none';
                currentHighlightIndex = -1;
            }
        }

        function navigateHighlight(direction) {
            if (matchPositions.length === 0) return;

            if (direction === 'next') {
                currentHighlightIndex = (currentHighlightIndex + 1) % matchPositions.length;
            } else if (direction === 'prev') {
                currentHighlightIndex = (currentHighlightIndex - 1 + matchPositions.length) % matchPositions.length;
            }

            scrollToHighlight(currentHighlightIndex);
        }

        function scrollToHighlight(index) {
            const highlights = document.getElementsByClassName('highlight');
            if (highlights[index]) {
                highlights[index].scrollIntoView({ behavior: 'instant', block: 'center' });
            }
        }

        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'instant' });
        }

        function appendToSearchBox(letter) {
            const searchBox = document.getElementById('search-box');
            searchBox.value += letter;
            searchBox.focus();
        }

        function clearSearchBox() {
            const searchBox = document.getElementById('search-box');
            searchBox.value = '';
            searchText();
        }
    </script>
</body>
</html>
