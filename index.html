<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>文本搜索工具</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 1em;
            line-height: 1.5;
            background-color: #121212;
            color: #e0e0e0;
        }
        #search-box {
            width: calc(100% - 120px);
            padding: 0.5em;
            margin-bottom: 1em;
            font-size: 1em;
            border: 1px solid #333;
            border-radius: 5px;
            background-color: #2c2c2c;
            color: #e0e0e0;
        }
        button {
            padding: 0.5em 1em;
            font-size: 1em;
            border: none;
            background-color: #007bff;
            color: white;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
        #original-text {
            margin-top: 2em;
            padding: 1em;
            background-color: #1e1e1e;
            border: 1px solid #333;
            border-radius: 5px;
            white-space: pre-wrap;
            position: relative;
        }
        .highlight {
            background-color: #ffeb3b;
            font-weight: bold;
        }
        .highlight-nav {
            position: fixed;
            top: 10%;
            right: 10px;
            background-color: #2c2c2c;
            border: 1px solid #333;
            padding: 10px;
            border-radius: 5px;
        }
        .highlight-nav button {
            display: block;
            margin-bottom: 5px;
            background-color: #444;
            color: #e0e0e0;
        }
        .highlight-nav button:hover {
            background-color: #666;
        }
    </style>
</head>
<body>
    <h1>文本搜索工具</h1>
    <div style="display: flex; align-items: center;">
        <input type="text" id="search-box" placeholder="输入关键词...">
        <button onclick="searchText()">搜索</button>
    </div>

    <div id="original-text">这里是您提供的文本内容，请根据需要进行修改。
例如：这是用户给出的文本段落，可以用于测试搜索功能。
  当然可以，以下是整理好的中韩对照文本：

1. 昨天情人节发生了不少交通事故。
어제 발렌타인데이는 사고가 많이 났습니다。

...</div>

    <div id="highlight-nav" class="highlight-nav" style="display: none;">
        <button onclick="navigateHighlight('prev')">上一处</button>
        <button onclick="navigateHighlight('next')">下一处</button>
        <button onclick="scrollToTop()">回到最顶部</button>
    </div>

    <script>
        let currentHighlightIndex = -1;
        let matchPositions = [];

        function searchText() {
            // 获取搜索框的值
            const query = document.getElementById('search-box').value.trim();
            const originalTextContainer = document.getElementById('original-text');
            let originalText = originalTextContainer.textContent;

            // 如果关键词为空则不做任何操作
            if (!query) {
                originalTextContainer.innerHTML = originalText;
                document.getElementById('highlight-nav').style.display = 'none';
                matchPositions = [];
                currentHighlightIndex = -1;
                return;
            }

            // 创建正则表达式匹配关键词（不区分大小写）
            const regex = new RegExp(`(${query})`, 'gi');
            let match;
            matchPositions = [];

            // 找到所有匹配的位置
            while ((match = regex.exec(originalText)) !== null) {
                matchPositions.push(match.index);
            }

            // 替换匹配到的关键词并高亮显示
            const highlightedText = originalText.replace(regex, '<span class="highlight">$1</span>');
            originalTextContainer.innerHTML = highlightedText;

            // 更新导航按钮
            const highlightNav = document.getElementById('highlight-nav');

            if (matchPositions.length > 0) {
                highlightNav.style.display = 'block';
                currentHighlightIndex = 0;
                scrollToHighlight(currentHighlightIndex);
            } else {
                highlightNav.style.display = 'none';
                currentHighlightIndex = -1;
            }
        }

        function navigateHighlight(direction) {
            if (matchPositions.length === 0) return;

            if (direction === 'next') {
                currentHighlightIndex = (currentHighlightIndex + 1) % matchPositions.length;
            } else if (direction === 'prev') {
                currentHighlightIndex = (currentHighlightIndex - 1 + matchPositions.length) % matchPositions.length;
            }

            scrollToHighlight(currentHighlightIndex);
        }

        function scrollToHighlight(index) {
            const highlights = document.getElementsByClassName('highlight');
            if (highlights[index]) {
                highlights[index].scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }

        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    </script>
</body>
</html>
